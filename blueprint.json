{
  "$schema": "https://playground.wordpress.net/blueprint-schema.json",
  "landingPage": "/wp-admin/",
  "preferredVersions": {
    "php": "8.0",
    "wp": "latest"
  },
  "phpExtensionBundles": [
    "kitchen-sink"
  ],
  "features": {
    "networking": true
  },
  "login": {
    "username": "admin",
    "password": "password"
  },
  "steps": [
    {
      "step": "installPlugin",
      "pluginZipFile": {
        "resource": "wordpress.org/plugins",
        "slug": "woocommerce"
      }
    },
    {
      "step": "installPlugin",
      "pluginZipFile": {
        "resource": "wordpress.org/plugins",
        "slug": "query-monitor"
      }
    },
    {
      "step": "activatePlugin",
      "pluginPath": "woocommerce/woocommerce.php"
    },
    {
      "step": "activatePlugin",
      "pluginPath": "query-monitor/query-monitor.php"
    },
    {
      "step": "mkdir",
      "path": "/wp-content/mu-plugins"
    },
    {
      "step": "writeFile",
      "path": "/wp-content/mu-plugins/rewrite.php",
      "data": "<?php\n/* Use pretty permalinks */\nadd_action( 'after_setup_theme', function() {\n    global $wp_rewrite;\n    $wp_rewrite->set_permalink_structure('/%postname%/');\n    $wp_rewrite->flush_rules();\n} );"
    },
    {
      "step": "setSiteOptions",
      "options": {
        "blogname": "My WooCommerce Store",
        "woocommerce_store_city": "New York",
        "woocommerce_store_address": "123 Main St",
        "woocommerce_store_postcode": "10001",
        "woocommerce_default_country": "US:NY",
        "woocommerce_onboarding_profile": {
          "skipped": true
        },
        "woocommerce_currency": "USD",
        "woocommerce_weight_unit": "lbs",
        "woocommerce_dimension_unit": "in",
        "woocommerce_allow_tracking": "no",
        "woocommerce_cheque_settings": {
          "enabled": "yes"
        },
        "woocommerce_cod_settings": {
          "enabled": "yes"
        },
        "woocommerce_bacs_settings": {
          "enabled": "yes"
        },
        "woocommerce_calc_taxes": "yes",
        "woocommerce_enable_coupons": "yes",
        "woocommerce_enable_reviews": "yes",
        "woocommerce_enable_review_rating": "yes",
        "woocommerce_manage_stock": "yes",
        "woocommerce_notify_low_stock": "yes",
        "woocommerce_notify_no_stock": "yes",
        "woocommerce_stock_email_recipient": "admin@example.com",
        "woocommerce_notify_low_stock_amount": 2,
        "woocommerce_notify_no_stock_amount": 0,
        "woocommerce_enable_guest_checkout": "yes",
        "woocommerce_enable_checkout_login_reminder": "yes",
        "woocommerce_enable_signup_and_login_from_checkout": "yes",
        "woocommerce_enable_myaccount_registration": "yes",
        "woocommerce_registration_generate_username": "yes",
        "woocommerce_registration_generate_password": "yes"
      }
    },
    {
      "step": "defineWpConfigConsts",
      "consts": {
        "WP_DEBUG": true,
        "WP_DEBUG_LOG": true,
        "WP_DEBUG_DISPLAY": false,
        "SCRIPT_DEBUG": true,
        "WP_ENVIRONMENT_TYPE": "development"
      },
      "method": "define-before-run"
    },
    {
      "step": "importWxr",
      "file": {
        "resource": "url",
        "url": "https://raw.githubusercontent.com/woocommerce/woocommerce/trunk/plugins/woocommerce/sample-data/sample_products.xml"
      }
    },
    {
      "step": "writeFile",
      "path": "/wp-content/mu-plugins/playground-helpers.php",
      "data": "<?php\n/**\n * WordPress Playground Development Helpers\n */\n\n// Show admin bar for all users\nadd_filter('show_admin_bar', '__return_true');\n\n// Disable update checks to improve performance\nadd_filter('automatic_updater_disabled', '__return_true');\nremove_action('init', 'wp_schedule_update_checks');\n\n// Add development notice\nadd_action('admin_notices', function() {\n    echo '<div class=\"notice notice-info\"><p>ðŸŽ® Running in WordPress Playground with WooCommerce defaults</p></div>';\n});\n\n// Log all errors to debug.log\nif (WP_DEBUG_LOG) {\n    ini_set('log_errors', 1);\n    ini_set('error_log', WP_CONTENT_DIR . '/debug.log');\n}\n"
    }
  ]
}